# Java的执行过程

## 虚拟机

需要：编译器 + 解释器

Java代码的执行过程

1. 编译器：java源代码(.java文件)被编译成 Class (.class文件) 文件（字节码）
   1. ``javac`` 命令
2. 解释器：解释Class文件（逐条翻译成机器码），JVM执行机器码
   1. win: ``java.exe``

Q: 为什么要采用这种方式运行？

A: 为了实现 *“一次编译，到处运行”*。不同平台安装不同的解释器就好了，不需要再编译一遍。

强制只执行编译器/解释器(???)

```
java -Xint // 只用解释器
java -Xcomp // 只用编译器
```



## 即时编译

对于热点代码，即时编译器将其编译为本地代码

**本地代码：机器可以直接识别运行的代码，就是机器指令**（因为和平台相关，所以叫本地代码）

Hotspot 中包含两个即时编译器C1，C2（不展开，主要是层次不同）



# 编译自定义JDK

